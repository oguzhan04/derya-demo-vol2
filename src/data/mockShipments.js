// Mock shipment data for demo/development
import { SHIPMENT_PHASES, PHASE_STATUS } from '../types/Phases.js'

// Helper to generate phase data based on shipment state
const generatePhaseData = (shipment, index) => {
  const hasArrivalDate = !!shipment.arrivalDate
  const hasDepartDate = !!shipment.departDate
  const now = new Date()
  const departDate = shipment.departDate ? new Date(shipment.departDate) : null
  const arrivalDate = shipment.arrivalDate ? new Date(shipment.arrivalDate) : null
  
  // Distribute shipments across phases for visual interest
  const phaseIndex = index % 5
  const phases = [
    SHIPMENT_PHASES.INTAKE,
    SHIPMENT_PHASES.COMPLIANCE,
    SHIPMENT_PHASES.MONITORING,
    SHIPMENT_PHASES.ARRIVAL,
    SHIPMENT_PHASES.BILLING,
  ]
  
  let currentPhase = phases[phaseIndex]
  let phaseProgress = {
    intake: PHASE_STATUS.DONE,
    compliance: PHASE_STATUS.DONE,
    monitoring: PHASE_STATUS.DONE,
    arrival: PHASE_STATUS.DONE,
    billing: PHASE_STATUS.DONE,
  }
  
  // Set current phase and progress based on shipment state
  if (!hasDepartDate) {
    // New shipment - in intake
    currentPhase = SHIPMENT_PHASES.INTAKE
    phaseProgress = {
      intake: PHASE_STATUS.IN_PROGRESS,
      compliance: PHASE_STATUS.PENDING,
      monitoring: PHASE_STATUS.PENDING,
      arrival: PHASE_STATUS.PENDING,
      billing: PHASE_STATUS.PENDING,
    }
  } else if (hasArrivalDate && arrivalDate < now) {
    // Arrived - could be in arrival or billing
    if (phaseIndex >= 3) {
      currentPhase = SHIPMENT_PHASES.BILLING
      phaseProgress = {
        intake: PHASE_STATUS.DONE,
        compliance: PHASE_STATUS.DONE,
        monitoring: PHASE_STATUS.DONE,
        arrival: PHASE_STATUS.DONE,
        billing: phaseIndex === 4 ? PHASE_STATUS.IN_PROGRESS : PHASE_STATUS.DONE,
      }
    } else {
      currentPhase = SHIPMENT_PHASES.ARRIVAL
      phaseProgress = {
        intake: PHASE_STATUS.DONE,
        compliance: PHASE_STATUS.DONE,
        monitoring: PHASE_STATUS.DONE,
        arrival: PHASE_STATUS.IN_PROGRESS,
        billing: PHASE_STATUS.PENDING,
      }
    }
  } else if (hasDepartDate && departDate < now) {
    // Departed but not arrived - in monitoring
    currentPhase = SHIPMENT_PHASES.MONITORING
    phaseProgress = {
      intake: PHASE_STATUS.DONE,
      compliance: PHASE_STATUS.DONE,
      monitoring: PHASE_STATUS.IN_PROGRESS,
      arrival: PHASE_STATUS.PENDING,
      billing: PHASE_STATUS.PENDING,
    }
  } else if (phaseIndex === 1) {
    // Some in compliance
    currentPhase = SHIPMENT_PHASES.COMPLIANCE
    phaseProgress = {
      intake: PHASE_STATUS.DONE,
      compliance: PHASE_STATUS.IN_PROGRESS,
      monitoring: PHASE_STATUS.PENDING,
      arrival: PHASE_STATUS.PENDING,
      billing: PHASE_STATUS.PENDING,
    }
  } else {
    // Use the distributed phase - ensure all keys are present
    const phaseOrder = [SHIPMENT_PHASES.INTAKE, SHIPMENT_PHASES.COMPLIANCE, SHIPMENT_PHASES.MONITORING, SHIPMENT_PHASES.ARRIVAL, SHIPMENT_PHASES.BILLING]
    const currentPhaseIndex = phaseOrder.indexOf(currentPhase)
    // Initialize with all phases
    phaseProgress = {
      [SHIPMENT_PHASES.INTAKE]: currentPhaseIndex > 0 ? PHASE_STATUS.DONE : (currentPhaseIndex === 0 ? PHASE_STATUS.IN_PROGRESS : PHASE_STATUS.PENDING),
      [SHIPMENT_PHASES.COMPLIANCE]: currentPhaseIndex > 1 ? PHASE_STATUS.DONE : (currentPhaseIndex === 1 ? PHASE_STATUS.IN_PROGRESS : PHASE_STATUS.PENDING),
      [SHIPMENT_PHASES.MONITORING]: currentPhaseIndex > 2 ? PHASE_STATUS.DONE : (currentPhaseIndex === 2 ? PHASE_STATUS.IN_PROGRESS : PHASE_STATUS.PENDING),
      [SHIPMENT_PHASES.ARRIVAL]: currentPhaseIndex > 3 ? PHASE_STATUS.DONE : (currentPhaseIndex === 3 ? PHASE_STATUS.IN_PROGRESS : PHASE_STATUS.PENDING),
      [SHIPMENT_PHASES.BILLING]: currentPhaseIndex > 4 ? PHASE_STATUS.DONE : (currentPhaseIndex === 4 ? PHASE_STATUS.IN_PROGRESS : PHASE_STATUS.PENDING),
    }
  }
  
  return { currentPhase, phaseProgress }
}

// Base shipment data
const baseShipments = [
  // Carrier underperformance examples - ACME Logistics
  {
    id: 'SH-A001',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Nanjing',
    destination: 'Frankfurt',
    departDate: '2024-01-15T10:00:00Z',
    promisedDate: '2024-01-16T14:00:00Z',
    arrivalDate: '2024-01-19T16:30:00Z',
    distanceKm: 8500,
    weightKg: 1200,
    costUsd: 8500,
    lane: 'CN->DE',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A002',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Shanghai',
    destination: 'Amsterdam',
    departDate: '2024-01-18T08:00:00Z',
    promisedDate: '2024-01-19T12:00:00Z',
    arrivalDate: '2024-01-22T14:00:00Z',
    distanceKm: 8900,
    weightKg: 2100,
    costUsd: 9500,
    lane: 'CN->NL',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A003',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Nanjing',
    destination: 'Frankfurt',
    departDate: '2024-01-20T15:00:00Z',
    promisedDate: '2024-01-21T18:00:00Z',
    arrivalDate: '2024-01-24T20:00:00Z',
    distanceKm: 8500,
    weightKg: 1800,
    costUsd: 8200,
    lane: 'CN->DE',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A004',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Shanghai',
    destination: 'Frankfurt',
    departDate: '2024-01-22T11:00:00Z',
    promisedDate: '2024-01-23T15:00:00Z',
    arrivalDate: '2024-01-26T17:00:00Z',
    distanceKm: 8900,
    weightKg: 1950,
    costUsd: 8800,
    lane: 'CN->DE',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A005',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Nanjing',
    destination: 'Amsterdam',
    departDate: '2024-01-25T09:00:00Z',
    promisedDate: '2024-01-26T13:00:00Z',
    arrivalDate: '2024-01-29T15:00:00Z',
    distanceKm: 8500,
    weightKg: 2200,
    costUsd: 9200,
    lane: 'CN->NL',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A006',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Shanghai',
    destination: 'Frankfurt',
    departDate: '2024-01-28T14:00:00Z',
    promisedDate: '2024-01-29T18:00:00Z',
    arrivalDate: '2024-02-01T20:00:00Z',
    distanceKm: 8900,
    weightKg: 1600,
    costUsd: 8500,
    lane: 'CN->DE',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A007',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Nanjing',
    destination: 'Amsterdam',
    departDate: '2024-01-30T07:00:00Z',
    promisedDate: '2024-01-31T11:00:00Z',
    arrivalDate: '2024-02-03T13:00:00Z',
    distanceKm: 8500,
    weightKg: 2400,
    costUsd: 9700,
    lane: 'CN->NL',
    riskLevel: 'High',
    commodity: 'Electronics',
  },
  {
    id: 'SH-A008',
    mode: 'Air',
    carrier: 'ACME Logistics',
    origin: 'Shanghai',
    destination: 'Frankfurt',
    departDate: '2024-02-01T16:00:00Z',
    promisedDate: '2024-02-02T20:00:00Z',
    arrivalDate: '2024-02-05T22:00:00Z',
    distanceKm: 8900,
    weightKg: 1800,
    costUsd: 8700,
    lane: 'CN->DE',
    riskLevel: 'High',
    commodity: 'Electronics',
  },

  // Good carrier performance - Global Express
  {
    id: 'SH-G001',
    mode: 'Air',
    carrier: 'Global Express',
    origin: 'Beijing',
    destination: 'Frankfurt',
    departDate: '2024-01-15T13:00:00Z',
    promisedDate: '2024-01-16T17:00:00Z',
    arrivalDate: '2024-01-16T16:45:00Z',
    distanceKm: 8200,
    weightKg: 1450,
    costUsd: 7200,
    lane: 'CN->DE',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },
  {
    id: 'SH-G002',
    mode: 'Air',
    carrier: 'Global Express',
    origin: 'Beijing',
    destination: 'Amsterdam',
    departDate: '2024-01-18T10:00:00Z',
    promisedDate: '2024-01-19T14:00:00Z',
    arrivalDate: '2024-01-19T13:30:00Z',
    timestamp: Date.now(),
    distanceKm: 8500,
    weightKg: 1650,
    costUsd: 7500,
    lane: 'CN->NL',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },
  {
    id: 'SH-G003',
    mode: 'Air',
    carrier: 'Global Express',
    origin: 'Beijing',
    destination: 'Frankfurt',
    departDate: '2024-01-20T16:00:00Z',
    promisedDate: '2024-01-21T20:00:00Z',
    arrivalDate: '2024-01-21T19:45:00Z',
    distanceKm: 8200,
    weightKg: 2100,
    costUsd: 7800,
    lane: 'CN->DE',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },
  {
    id: 'SH-G004',
    mode: 'Air',
    carrier: 'Global Express',
    origin: 'Beijing',
    destination: 'Amsterdam',
    departDate: '2024-01-22T12:00:00Z',
    promisedDate: '2024-01-23T16:00:00Z',
    arrivalDate: '2024-01-23T15:20:00Z',
    distanceKm: 8500,
    weightKg: 1950,
    costUsd: 7600,
    lane: 'CN->NL',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },

  // Lane delay issues - Trans-Pacific
  {
    id: 'SH-T001',
    mode: 'Ocean',
    carrier: 'Pacific Lines',
    origin: 'Los Angeles',
    destination: 'Tokyo',
    departDate: '2024-01-10T08:00:00Z',
    promisedDate: '2024-01-20T12:00:00Z',
    arrivalDate: '2024-01-23T14:30:00Z',
    distanceKm: 9100,
    weightKg: 15000,
    costUsd: 3500,
    lane: 'US->JP',
    riskLevel: 'Med',
    commodity: 'Automotive',
  },
  {
    id: 'SH-T002',
    mode: 'Ocean',
    carrier: 'Pacific Lines',
    origin: 'Los Angeles',
    destination: 'Tokyo',
    departDate: '2024-01-17T14:00:00Z',
    promisedDate: '2024-01-27T18:00:00Z',
    arrivalDate: '2024-01-31T20:15:00Z',
    distanceKm: 9100,
    weightKg: 18000,
    costUsd: 3800,
    lane: 'US->JP',
    riskLevel: 'Med',
    commodity: 'Automotive',
  },
  {
    id: 'SH-T003',
    mode: 'Ocean',
    carrier: 'Pacific Lines',
    origin: 'Los Angeles',
    destination: 'Tokyo',
    departDate: '2024-01-25T09:00:00Z',
    promisedDate: '2024-02-04T13:00:00Z',
    arrivalDate: '2024-02-08T15:45:00Z',
    distanceKm: 9100,
    weightKg: 16500,
    costUsd: 3600,
    lane: 'US->JP',
    riskLevel: 'Med',
    commodity: 'Automotive',
  },
  {
    id: 'SH-T004',
    mode: 'Ocean',
    carrier: 'Pacific Lines',
    origin: 'Los Angeles',
    destination: 'Tokyo',
    departDate: '2024-02-01T11:00:00Z',
    promisedDate: '2024-02-11T15:00:00Z',
    arrivalDate: '2024-02-15T17:30:00Z',
    distanceKm: 9100,
    weightKg: 19000,
    costUsd: 3700,
    lane: 'US->JP',
    riskLevel: 'Med',
    commodity: 'Automotive',
  },
  {
    id: 'SH-T005',
    mode: 'Ocean',
    carrier: 'Pacific Lines',
    origin: 'Los Angeles',
    destination: 'Tokyo',
    departDate: '2024-02-08T07:00:00Z',
    promisedDate: '2024-02-18T11:00:00Z',
    arrivalDate: '2024-02-22T13:15:00Z',
    distanceKm: 9100,
    weightKg: 17200,
    costUsd: 3550,
    lane: 'US->JP',
    riskLevel: 'Med',
    commodity: 'Automotive',
  },
  {
    id: 'SH-T006',
    mode: 'Ocean',
    carrier: 'Pacific Lines',
    origin: 'Los Angeles',
    destination: 'Tokyo',
    departDate: '2024-02-15T13:00:00Z',
    promisedDate: '2024-02-25T17:00:00Z',
    arrivalDate: '2024-03-01T19:00:00Z',
    distanceKm: 9100,
    weightKg: 18500,
    costUsd: 3750,
    lane: 'US->JP',
    riskLevel: 'Med',
    commodity: 'Automotive',
  },

  // Mode shift opportunities - Short haul air vs rail
  {
    id: 'SH-R001',
    mode: 'Air',
    carrier: 'Regional Air',
    origin: 'Munich',
    destination: 'Milan',
    departDate: '2024-01-12T10:00:00Z',
    promisedDate: '2024-01-12T18:00:00Z',
    arrivalDate: '2024-01-12T17:30:00Z',
    distanceKm: 650,
    weightKg: 800,
    costUsd: 1200,
    lane: 'DE->IT',
    riskLevel: 'Low',
    commodity: 'Medical Devices',
  },
  {
    id: 'SH-R002',
    mode: 'Air',
    carrier: 'Regional Air',
    origin: 'Munich',
    destination: 'Milan',
    departDate: '2024-01-19T14:00:00Z',
    promisedDate: '2024-01-19T22:00:00Z',
    arrivalDate: '2024-01-19T21:45:00Z',
    distanceKm: 650,
    weightKg: 950,
    costUsd: 1280,
    lane: 'DE->IT',
    riskLevel: 'Low',
    commodity: 'Medical Devices',
  },
  {
    id: 'SH-R003',
    mode: 'Air',
    carrier: 'Regional Air',
    origin: 'Munich',
    destination: 'Milan',
    departDate: '2024-01-26T09:00:00Z',
    promisedDate: '2024-01-26T17:00:00Z',
    arrivalDate: '2024-01-26T16:30:00Z',
    distanceKm: 650,
    weightKg: 720,
    costUsd: 1100,
    lane: 'DE->IT',
    riskLevel: 'Low',
    commodity: 'Medical Devices',
  },
  {
    id: 'SH-R004',
    mode: 'Rail',
    carrier: 'European Rail',
    origin: 'Munich',
    destination: 'Milan',
    departDate: '2024-01-12T10:00:00Z',
    promisedDate: '2024-01-13T18:00:00Z',
    arrivalDate: '2024-01-13T17:45:00Z',
    distanceKm: 650,
    weightKg: 12000,
    costUsd: 180,
    lane: 'DE->IT',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },
  {
    id: 'SH-R005',
    mode: 'Rail',
    carrier: 'European Rail',
    origin: 'Munich',
    destination: 'Milan',
    departDate: '2024-01-19T14:00:00Z',
    promisedDate: '2024-01-20T22:00:00Z',
    arrivalDate: '2024-01-20T21:30:00Z',
    distanceKm: 650,
    weightKg: 15000,
    costUsd: 210,
    lane: 'DE->IT',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },

  // Cost spike examples - Fuel surcharge increases
  {
    id: 'SH-F001',
    mode: 'Ocean',
    carrier: 'Mediterranean Lines',
    origin: 'Genoa',
    destination: 'Dubai',
    departDate: '2024-01-05T08:00:00Z',
    promisedDate: '2024-01-15T16:00:00Z',
    arrivalDate: '2024-01-15T15:30:00Z',
    distanceKm: 4200,
    weightKg: 22000,
    costUsd: 4200,
    lane: 'IT->AE',
    riskLevel: 'Med',
    commodity: 'Textiles',
  },
  {
    id: 'SH-F002',
    mode: 'Ocean',
    carrier: 'Mediterranean Lines',
    origin: 'Genoa',
    destination: 'Dubai',
    departDate: '2024-01-20T14:00:00Z',
    promisedDate: '2024-01-30T22:00:00Z',
    arrivalDate: '2024-01-30T21:15:00Z',
    distanceKm: 4200,
    weightKg: 24000,
    costUsd: 5200, // 24% increase
    lane: 'IT->AE',
    riskLevel: 'Med',
    commodity: 'Textiles',
  },
  {
    id: 'SH-F003',
    mode: 'Ocean',
    carrier: 'Mediterranean Lines',
    origin: 'Genoa',
    destination: 'Dubai',
    departDate: '2024-02-05T11:00:00Z',
    promisedDate: '2024-02-15T19:00:00Z',
    arrivalDate: '2024-02-15T18:45:00Z',
    distanceKm: 4200,
    weightKg: 21000,
    costUsd: 5300, // Continued increase
    lane: 'IT->AE',
    riskLevel: 'Med',
    commodity: 'Textiles',
  },
  {
    id: 'SH-F004',
    mode: 'Ocean',
    carrier: 'Mediterranean Lines',
    origin: 'Genoa',
    destination: 'Dubai',
    departDate: '2024-02-20T09:00:00Z',
    promisedDate: '2024-03-02T17:00:00Z',
    arrivalDate: '2024-03-02T16:30:00Z',
    distanceKm: 4200,
    weightKg: 23500,
    costUsd: 5400, // Peak pricing
    lane: 'IT->AE',
    riskLevel: 'Med',
    commodity: 'Textiles',
  },

  // High emissions routes
  {
    id: 'SH-E001',
    mode: 'Air',
    carrier: 'Heavy Freight Air',
    origin: 'Sydney',
    destination: 'New York',
    departDate: '2024-01-08T22:00:00Z',
    promisedDate: '2024-01-10T06:00:00Z',
    arrivalDate: '2024-01-10T05:30:00Z',
    distanceKm: 15900,
    weightKg: 45000,
    costUsd: 45000,
    lane: 'AU->US',
    riskLevel: 'Low',
    commodity: 'Machinery',
  },
  {
    id: 'SH-E002',
    mode: 'Air',
    carrier: 'Heavy Freight Air',
    origin: 'Sydney',
    destination: 'New York',
    departDate: '2024-01-22T20:00:00Z',
    promisedDate: '2024-01-24T04:00:00Z',
    arrivalDate: '2024-01-24T03:15:00Z',
    distanceKm: 15900,
    weightKg: 52000,
    costUsd: 48000,
    lane: 'AU->US',
    riskLevel: 'Low',
    commodity: 'Machinery',
  },
  {
    id: 'SH-E003',
    mode: 'Air',
    carrier: 'Heavy Freight Air',
    origin: 'Sydney',
    destination: 'New York',
    departDate: '2024-02-05T18:00:00Z',
    promisedDate: '2024-02-07T02:00:00Z',
    arrivalDate: '2024-02-07T01:45:00Z',
    distanceKm: 15900,
    weightKg: 48000,
    costUsd: 46000,
    lane: 'AU->US',
    riskLevel: 'Low',
    commodity: 'Machinery',
  },

  // Normal/reference records for comparison
  {
    id: 'SH-N001',
    mode: 'Ocean',
    carrier: 'Standard Lines',
    origin: 'Hamburg',
    destination: 'New York',
    departDate: '2024-01-10T06:00:00Z',
    promisedDate: '2024-01-20T18:00:00Z',
    arrivalDate: '2024-01-20T17:30:00Z',
    distanceKm: 6100,
    weightKg: 28000,
    costUsd: 3200,
    lane: 'DE->US',
    riskLevel: 'Low',
    commodity: 'Electronics',
  },
  {
    id: 'SH-N002',
    mode: 'Rail',
    carrier: 'European Rail',
    origin: 'Paris',
    destination: 'Berlin',
    departDate: '2024-01-15T12:00:00Z',
    promisedDate: '2024-01-16T18:00:00Z',
    arrivalDate: '2024-01-16T17:45:00Z',
    distanceKm: 1050,
    weightKg: 15000,
    costUsd: 450,
    lane: 'FR->DE',
    riskLevel: 'Low',
    commodity: 'Food Products',
  },
  {
    id: 'SH-N003',
    mode: 'Road',
    carrier: 'Quick Delivery',
    origin: 'Amsterdam',
    destination: 'Brussels',
    departDate: '2024-01-18T08:00:00Z',
    promisedDate: '2024-01-18T14:00:00Z',
    arrivalDate: '2024-01-18T13:30:00Z',
    distanceKm: 200,
    weightKg: 1200,
    costUsd: 280,
    lane: 'NL->BE',
    riskLevel: 'Low',
    commodity: 'Documents',
  },
]

// Add phase data to all shipments
export const mockShipments = baseShipments.map((shipment, index) => {
  const { currentPhase, phaseProgress } = generatePhaseData(shipment, index)
  return {
    ...shipment,
    currentPhase,
    phaseProgress,
  }
})
